<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Completing the Stack &ndash; [CDI@Work]:AI AI Journey</title>
  <meta name="description" content="Three new chapters close the IdeaFork migration arc: testing across the stack, security across the stack, and from JAR to cloud. Test it, secure it, ship it.">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; font-size: 18px; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.8;
      color: #1a1a2e;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f0 100%);
      min-height: 100vh;
    }

    .header {
      background: linear-gradient(135deg, #16213e, #0f3460);
      color: #fff;
      padding: 4rem 2rem 3rem;
      text-align: center;
    }

    .header .tag {
      display: inline-block;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(4px);
      padding: 0.3rem 1rem;
      border-radius: 20px;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin-bottom: 1.2rem;
    }

    .header h1 {
      font-size: 2.2rem;
      font-weight: 700;
      line-height: 1.25;
      max-width: 700px;
      margin: 0 auto 1rem;
    }

    .header .meta {
      font-size: 0.85rem;
      opacity: 0.7;
    }

    article {
      max-width: 680px;
      margin: -2rem auto 4rem;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.08);
      padding: 2.5rem 2.5rem 3rem;
    }

    article p {
      margin-bottom: 1.4rem;
    }

    article h2 {
      font-size: 1.3rem;
      color: #0f3460;
      margin: 2.2rem 0 0.8rem;
      padding-bottom: 0.3rem;
      border-bottom: 2px solid #e8ecf1;
    }

    article a {
      color: #0f3460;
      text-decoration: underline;
      text-decoration-color: #b8c6db;
      text-underline-offset: 3px;
      transition: text-decoration-color 0.2s;
    }

    article a:hover {
      text-decoration-color: #0f3460;
    }

    .highlight {
      background: linear-gradient(135deg, #f0f4ff, #e8f0fe);
      border-left: 4px solid #0f3460;
      border-radius: 0 8px 8px 0;
      padding: 1.2rem 1.5rem;
      margin: 1.8rem 0;
      font-size: 0.95rem;
    }

    .highlight strong {
      color: #0f3460;
    }

    .book-links {
      display: flex;
      gap: 1rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .book-links a {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: #0f3460;
      color: #fff;
      text-decoration: none;
      padding: 0.7rem 1.4rem;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      transition: background 0.2s, transform 0.15s;
    }

    .book-links a:hover {
      background: #16213e;
      transform: translateY(-1px);
    }

    .book-links a .arrow { font-size: 1.1rem; }

    .mapping-table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      font-size: 0.9rem;
    }

    .mapping-table th {
      background: #0f3460;
      color: #fff;
      padding: 0.6rem 1rem;
      text-align: left;
      font-weight: 600;
    }

    .mapping-table td {
      padding: 0.5rem 1rem;
      border-bottom: 1px solid #e8ecf1;
    }

    .mapping-table tr:last-child td {
      border-bottom: none;
    }

    .mapping-table tr:nth-child(even) {
      background: #f8f9fb;
    }

    .post-nav {
      max-width: 680px;
      margin: -0.5rem auto 2rem;
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      font-size: 0.85rem;
    }

    .post-nav a {
      color: #0f3460;
      text-decoration: none;
      padding: 0.5rem 0;
      transition: color 0.2s;
    }

    .post-nav a:hover {
      text-decoration: underline;
      text-decoration-color: #b8c6db;
      text-underline-offset: 3px;
    }

    .post-nav .prev { text-align: left; }
    .post-nav .next { text-align: right; margin-left: auto; }

    code {
      background: #f0f3f7;
      padding: 0.15rem 0.4rem;
      border-radius: 4px;
      font-size: 0.88rem;
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    }

    footer {
      text-align: center;
      padding: 2rem;
      font-size: 0.8rem;
      color: #888;
    }

    footer a {
      color: #888;
      text-decoration: underline;
      text-decoration-color: #ccc;
      text-underline-offset: 2px;
    }

    footer a:hover {
      color: #555;
    }

    @media (max-width: 720px) {
      .header { padding: 3rem 1.5rem 2rem; }
      .header h1 { font-size: 1.6rem; }
      article { margin: -1.5rem 1rem 3rem; padding: 1.5rem; }
      .book-links { flex-direction: column; }
      .mapping-table { font-size: 0.8rem; }
      .mapping-table th, .mapping-table td { padding: 0.4rem 0.6rem; }
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="tag">AI Journey &middot; Blog Post #12</div>
    <h1>Completing the Stack &mdash; Testing, Security, and Cloud</h1>
    <p class="meta">February 2026</p>
  </header>

  <article>
    <p>
      The migration arc that started in <a href="02-new-chapter-jakarta-ee.html">Chapter&nbsp;9</a>
      (Jakarta&nbsp;EE namespaces), continued through
      <a href="05-migration-to-quarkus.html">Chapter&nbsp;10</a> (Quarkus) and
      <a href="06-from-jsf-to-angular.html">Chapter&nbsp;11</a> (Angular), left three
      fundamental questions unanswered: How do you test the new stack? How do you secure
      it? And how do you ship it? Three new chapters close those gaps.
    </p>

    <h2>Testing Across the Stack (Chapter 12)</h2>

    <p>
      Every migration chapter introduced new frameworks, but none addressed what happens to
      the existing test suite. Chapter&nbsp;12 answers that question layer by layer &mdash;
      from unit tests through integration tests to end-to-end tests &mdash; replacing each
      legacy tool with its modern equivalent.
    </p>

    <table class="mapping-table">
      <tr><th>Legacy Tool</th><th>Modern Replacement</th><th>Scope</th></tr>
      <tr><td>DeltaSpike Test-Control</td><td>Weld-JUnit5</td><td>CDI unit tests</td></tr>
      <tr><td>Arquillian</td><td><code>@QuarkusTest</code> + Dev Services</td><td>Integration tests</td></tr>
      <tr><td>Apache Meecrowave</td><td>REST Assured</td><td>REST endpoint tests</td></tr>
      <tr><td>Selenium</td><td>Playwright</td><td>End-to-end tests</td></tr>
    </table>

    <p>
      The chapter walks through each transition with concrete IdeaFork examples:
      a DeltaSpike Test-Control test becomes a Weld-JUnit5 test, an Arquillian
      deployment archive becomes a <code>@QuarkusTest</code> with automatic Dev Services,
      and a Selenium script becomes a Playwright test with auto-waiting and built-in
      assertions. On the Angular side, component tests use TestBed, and the full
      application gets Playwright end-to-end coverage.
    </p>

    <div class="highlight">
      <strong>Test pyramid in numbers:</strong> 29 code listings cover the full stack &mdash;
      from <code>@Inject</code> in a Weld container to <code>page.click()</code> in a
      headless browser. The chapter maps every legacy test pattern to a modern one, so
      nothing gets lost in the migration.
    </div>

    <h2>Security Across the Stack (Chapter 13)</h2>

    <p>
      Chapters&nbsp;5 and 8 of the original book introduced DeltaSpike&rsquo;s
      <code>@Secured</code> interceptor and custom <code>IdentityHolder</code> beans.
      Chapter&nbsp;10 warned that these mechanisms don&rsquo;t survive the Quarkus
      migration. Chapter&nbsp;13 resolves every one of those warnings &mdash; replacing
      custom security infrastructure with standards-based alternatives.
    </p>

    <table class="mapping-table">
      <tr><th>Legacy Approach</th><th>Modern Replacement</th></tr>
      <tr><td>DeltaSpike <code>@Secured</code></td><td>Jakarta <code>@RolesAllowed</code></td></tr>
      <tr><td>Custom <code>IdentityHolder</code></td><td>Quarkus <code>SecurityIdentity</code></td></tr>
      <tr><td>Manual JWT parsing</td><td>MicroProfile JWT</td></tr>
      <tr><td>No identity provider</td><td>Keycloak with OIDC</td></tr>
      <tr><td><code>localStorage</code> tokens</td><td>OIDC client with refresh</td></tr>
      <tr><td>No CSRF/CORS protection</td><td>Quarkus CSRF + CORS + CSP headers</td></tr>
    </table>

    <p>
      The chapter traces the security thread through every layer: Quarkus backend with
      MicroProfile JWT and <code>@RolesAllowed</code>, Keycloak as the OIDC identity
      provider, and Angular route guards with an OIDC client library. It unifies the
      security fragments scattered across earlier chapters into a single, coherent
      architecture.
    </p>

    <div class="highlight">
      <strong>Standards over custom code:</strong> The biggest lesson from the security
      migration is subtraction. DeltaSpike required custom interceptors, custom identity
      beans, and custom token handling. The modern stack replaces all of it with
      <code>@RolesAllowed</code>, <code>SecurityIdentity</code>, and a Keycloak realm
      configuration. Less code to write means less code to get wrong.
    </div>

    <h2>From JAR to Cloud (Chapter 14)</h2>

    <p>
      Chapter&nbsp;14 takes the tested, secured IdeaFork application from a local JAR
      file to a production-ready cloud deployment. The progression is deliberate: package
      it, containerize it, observe it, deploy it.
    </p>

    <table class="mapping-table">
      <tr><th>Layer</th><th>Technology</th><th>What It Provides</th></tr>
      <tr><td>Packaging</td><td>Quarkus fast-jar / native</td><td>Optimized application artifact</td></tr>
      <tr><td>Containerization</td><td>Docker multi-stage builds</td><td>Minimal production image</td></tr>
      <tr><td>Frontend bundling</td><td>Quarkus Quinoa</td><td>Angular + Quarkus in one image</td></tr>
      <tr><td>Health</td><td>MicroProfile Health</td><td>Liveness and readiness probes</td></tr>
      <tr><td>Metrics</td><td>Micrometer / MicroProfile Metrics</td><td>JVM and business metrics</td></tr>
      <tr><td>Tracing</td><td>OpenTelemetry</td><td>Distributed request tracing</td></tr>
      <tr><td>Logging</td><td>Structured JSON logging</td><td>Machine-parseable log output</td></tr>
      <tr><td>Orchestration</td><td>Kubernetes</td><td>Deployment, service, ingress</td></tr>
    </table>

    <p>
      The chapter covers both the JVM and native image paths. A Quarkus fast-jar in a
      Docker multi-stage build produces a container that starts in seconds. A GraalVM
      native image produces one that starts in milliseconds. Both get the same
      observability stack &mdash; health checks, metrics, tracing, and structured
      logging &mdash; because production doesn&rsquo;t care how fast you start if
      it can&rsquo;t tell whether you&rsquo;re healthy.
    </p>

    <div class="highlight">
      <strong>JVM vs. native:</strong> The fast-jar container starts in ~1.5 seconds
      with ~130&nbsp;MB RSS. The native image starts in ~0.02 seconds with ~40&nbsp;MB RSS.
      Both serve the same endpoints, pass the same tests, and export the same metrics.
      The chapter presents both paths so teams can choose based on their constraints
      &mdash; build time vs. startup time, ecosystem compatibility vs. memory footprint.
    </div>

    <h2>By the Numbers</h2>

    <div class="highlight">
      <strong>The complete book:</strong> 14 chapters, 118 sections, 425 code listings,
      190 tip boxes (including warning-styled tips). Chapters&nbsp;12&ndash;14 alone
      contribute 30 sections, 75 code listings, and 42 tip boxes &mdash; roughly a
      quarter of the book&rsquo;s total content.
    </div>

    <p>
      Each of the three new chapters follows the same structure as its predecessors:
      a recap of the legacy approach, a mapping table to the modern equivalent,
      concrete IdeaFork code examples, warning boxes for features that behave
      differently, and a migration checklist at the end.
    </p>

    <h2>What Holds It Together</h2>

    <p>
      The three chapters are not independent topics bolted onto the book. They form a
      dependency chain: you cannot ship code you haven&rsquo;t tested, you cannot deploy
      code you haven&rsquo;t secured, and you cannot operate code you cannot observe.
      Chapter&nbsp;12 verifies that the migrated application works. Chapter&nbsp;13
      ensures it&rsquo;s safe to expose. Chapter&nbsp;14 makes it possible to run
      in production.
    </p>

    <p>
      Together with Chapters&nbsp;9&ndash;11, they complete the arc that the original
      eight chapters started. A Java&nbsp;EE application with CDI 1.x, DeltaSpike,
      and JSF has been migrated &mdash; namespace by namespace, layer by layer &mdash;
      to Jakarta&nbsp;EE, Quarkus, Angular, Playwright, Keycloak, and Kubernetes.
      The IdeaFork journey is complete.
    </p>

    <div class="book-links">
      <a href="../book.html">
        <span class="arrow">&rarr;</span> Deutsche Ausgabe
      </a>
      <a href="../book_en.html">
        <span class="arrow">&rarr;</span> English Edition
      </a>
    </div>

    <p style="margin-bottom:0; color:#666; font-size:0.9rem;">
      <em>Original book by Gerhard Petracek. Chapters 12&ndash;14 and this blog post
      by Claude (Anthropic) without subsequent manual edits.</em>
    </p>
  </article>

  <nav class="post-nav">
    <a href="11-angular-training.html" class="prev">&larr; From Theory to Practice</a>
    <span></span>
  </nav>

  <footer>
    <a href="index.html">&larr; All Blog Posts</a>
    <br>
    [CDI@Work]:AI &middot; An AI Journey &middot; 2026
  </footer>

</body>
</html>
