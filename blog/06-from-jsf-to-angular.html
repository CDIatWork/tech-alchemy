<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>From JSF to Angular &ndash; A New Chapter for [CDI@Work]:AI</title>
  <meta name="description" content="How Claude wrote Chapter 11 replacing IdeaFork's JSF frontend with an Angular SPA &mdash; mapping every DeltaSpike concept to its Angular equivalent.">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; font-size: 18px; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.8;
      color: #1a1a2e;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f0 100%);
      min-height: 100vh;
    }

    .header {
      background: linear-gradient(135deg, #16213e, #0f3460);
      color: #fff;
      padding: 4rem 2rem 3rem;
      text-align: center;
    }

    .header .tag {
      display: inline-block;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(4px);
      padding: 0.3rem 1rem;
      border-radius: 20px;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin-bottom: 1.2rem;
    }

    .header h1 {
      font-size: 2.2rem;
      font-weight: 700;
      line-height: 1.25;
      max-width: 700px;
      margin: 0 auto 1rem;
    }

    .header .meta {
      font-size: 0.85rem;
      opacity: 0.7;
    }

    article {
      max-width: 680px;
      margin: -2rem auto 4rem;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.08);
      padding: 2.5rem 2.5rem 3rem;
    }

    article p {
      margin-bottom: 1.4rem;
    }

    article h2 {
      font-size: 1.3rem;
      color: #0f3460;
      margin: 2.2rem 0 0.8rem;
      padding-bottom: 0.3rem;
      border-bottom: 2px solid #e8ecf1;
    }

    article a {
      color: #0f3460;
      text-decoration: underline;
      text-decoration-color: #b8c6db;
      text-underline-offset: 3px;
      transition: text-decoration-color 0.2s;
    }

    article a:hover {
      text-decoration-color: #0f3460;
    }

    .highlight {
      background: linear-gradient(135deg, #f0f4ff, #e8f0fe);
      border-left: 4px solid #0f3460;
      border-radius: 0 8px 8px 0;
      padding: 1.2rem 1.5rem;
      margin: 1.8rem 0;
      font-size: 0.95rem;
    }

    .highlight strong {
      color: #0f3460;
    }

    .warning-highlight {
      background: linear-gradient(135deg, #fff8f0, #fff3e0);
      border-left: 4px solid #e67e22;
      border-radius: 0 8px 8px 0;
      padding: 1.2rem 1.5rem;
      margin: 1.8rem 0;
      font-size: 0.95rem;
    }

    .warning-highlight strong {
      color: #e67e22;
    }

    .book-links {
      display: flex;
      gap: 1rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .book-links a {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: #0f3460;
      color: #fff;
      text-decoration: none;
      padding: 0.7rem 1.4rem;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      transition: background 0.2s, transform 0.15s;
    }

    .book-links a:hover {
      background: #16213e;
      transform: translateY(-1px);
    }

    .book-links a .arrow { font-size: 1.1rem; }

    .timeline {
      position: relative;
      padding-left: 1.8rem;
      margin: 1.5rem 0;
    }

    .timeline::before {
      content: '';
      position: absolute;
      left: 0.45rem;
      top: 0.4rem;
      bottom: 0.4rem;
      width: 2px;
      background: #d0d8e4;
    }

    .timeline li {
      list-style: none;
      position: relative;
      margin-bottom: 1rem;
      font-size: 0.95rem;
    }

    .timeline li::before {
      content: '';
      position: absolute;
      left: -1.45rem;
      top: 0.55rem;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #0f3460;
      border: 2px solid #fff;
      box-shadow: 0 0 0 2px #d0d8e4;
    }

    code {
      background: #f0f3f7;
      padding: 0.15rem 0.4rem;
      border-radius: 4px;
      font-size: 0.88rem;
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    }

    .mapping-table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      font-size: 0.9rem;
    }

    .mapping-table th {
      background: #0f3460;
      color: #fff;
      padding: 0.6rem 1rem;
      text-align: left;
      font-weight: 600;
    }

    .mapping-table td {
      padding: 0.5rem 1rem;
      border-bottom: 1px solid #e8ecf1;
    }

    .mapping-table tr:last-child td {
      border-bottom: none;
    }

    .mapping-table tr:nth-child(even) {
      background: #f8f9fb;
    }

    .post-nav {
      max-width: 680px;
      margin: -0.5rem auto 2rem;
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      font-size: 0.85rem;
    }

    .post-nav a {
      color: #0f3460;
      text-decoration: none;
      padding: 0.5rem 0;
      transition: color 0.2s;
    }

    .post-nav a:hover {
      text-decoration: underline;
      text-decoration-color: #b8c6db;
      text-underline-offset: 3px;
    }

    .post-nav .prev { text-align: left; }
    .post-nav .next { text-align: right; margin-left: auto; }

    footer {
      text-align: center;
      padding: 2rem;
      font-size: 0.8rem;
      color: #888;
    }

    footer a {
      color: #888;
      text-decoration: underline;
      text-decoration-color: #ccc;
      text-underline-offset: 2px;
    }

    footer a:hover {
      color: #555;
    }

    @media (max-width: 720px) {
      .header { padding: 3rem 1.5rem 2rem; }
      .header h1 { font-size: 1.6rem; }
      article { margin: -1.5rem 1rem 3rem; padding: 1.5rem; }
      .book-links { flex-direction: column; }
      .mapping-table { font-size: 0.8rem; }
      .mapping-table th, .mapping-table td { padding: 0.4rem 0.6rem; }
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="tag">AI Journey &middot; Blog Post #6</div>
    <h1>From JSF to Angular &ndash; Completing the Frontend Migration</h1>
    <p class="meta">February 2026</p>
  </header>

  <article>
    <p>
      Chapter 10 moved IdeaFork&rsquo;s backend off the application server and onto Quarkus.
      But it left a loose end: the frontend was still JSF. Server-rendered Facelets pages,
      DeltaSpike view scopes, EL expressions &mdash; all tied to a runtime that no longer existed.
      Chapter 11 finishes the job. It replaces the entire JSF frontend with an
      <a href="https://angular.dev">Angular</a> single-page application.
    </p>

    <h2>Why the Frontend Had to Change</h2>

    <p>
      Chapter 10&rsquo;s warning boxes already flagged the problem. The JSF-specific DeltaSpike
      scopes &mdash; <code>@ViewAccessScoped</code>, <code>@WindowScoped</code>,
      <code>@GroupedConversationScoped</code> &mdash; have no Quarkus equivalent. They were
      designed for server-rendered page lifecycles that simply don&rsquo;t exist in a
      Quarkus application. The IdeaFork demo app uses all three across 18 XHTML pages and
      10 backing bean controllers. Keeping JSF was not an option.
    </p>

    <p>
      Angular decouples the frontend completely. The REST APIs already exist from the Quarkus
      migration &mdash; Angular replaces only the UI layer, communicating with the backend
      through HTTP. No server-side sessions, no view state, no Facelets lifecycle.
    </p>

    <h2>Mapping JSF to Angular</h2>

    <p>
      The chapter is organized around concept pairs. Each section takes a JSF/DeltaSpike
      feature, explains its purpose, and shows the Angular equivalent with side-by-side
      code examples. Here are the key mappings:
    </p>

    <table class="mapping-table">
      <tr>
        <th>JSF / DeltaSpike</th>
        <th>Angular</th>
      </tr>
      <tr>
        <td>XHTML Facelets pages</td>
        <td>Standalone components</td>
      </tr>
      <tr>
        <td>ViewConfig hierarchy</td>
        <td>Routes array + <code>Router</code></td>
      </tr>
      <tr>
        <td><code>@ViewAccessScoped</code></td>
        <td>Component lifecycle</td>
      </tr>
      <tr>
        <td><code>@WindowScoped</code></td>
        <td><code>providedIn: 'root'</code> service</td>
      </tr>
      <tr>
        <td><code>@GroupedConversationScoped</code></td>
        <td>Route-scoped service</td>
      </tr>
      <tr>
        <td><code>@Secured</code> + AccessDecisionVoter</td>
        <td><code>canActivate</code> guard</td>
      </tr>
      <tr>
        <td><code>@ResourceClient</code> proxy</td>
        <td>HttpClient service</td>
      </tr>
      <tr>
        <td><code>h:form</code> + Bean Validation</td>
        <td>Reactive Forms + Validators</td>
      </tr>
      <tr>
        <td>EL expressions <code>#{...}</code></td>
        <td>Template bindings <code>{{...}}</code></td>
      </tr>
    </table>

    <p>
      The chapter uses Angular v19+ patterns throughout: standalone components (no NgModules),
      signals for reactive state, the new control flow syntax (<code>@if</code>, <code>@for</code>),
      functional guards and interceptors, and <code>provideRouter</code> /
      <code>provideHttpClient</code> for configuration.
    </p>

    <h2>Resolving Chapter 10&rsquo;s Warnings</h2>

    <p>
      The most satisfying part of this chapter is that it resolves the open questions
      Chapter 10 had to leave unanswered. The yellow warning boxes in the Quarkus chapter
      said: these scopes don&rsquo;t exist anymore. Chapter 11 provides the answer:
      they don&rsquo;t need to.
    </p>

    <ul class="timeline">
      <li><code>@ViewAccessScoped</code> controllers become Angular components &mdash; created and destroyed by the router, state lives in component fields</li>
      <li><code>@WindowScoped</code> services become Angular singleton services with signals for reactive state</li>
      <li><code>@GroupedConversationScoped</code> (the promotion wizard) becomes a service scoped to a feature route, destroyed on navigation away</li>
      <li><code>@SessionScoped</code> identity holders become an AuthService with JWT in localStorage</li>
    </ul>

    <p>
      Angular&rsquo;s dependency injection hierarchy allows scoping services to route subtrees &mdash;
      functionally equivalent to DeltaSpike&rsquo;s grouped conversations, but managed by
      the framework rather than a CDI extension.
    </p>

    <h2>The Promotion Wizard</h2>

    <p>
      Section 11.8 tackles the most complex UI feature in IdeaFork: a three-step promotion
      wizard that uses <code>@GroupedConversationScoped</code> to maintain state across
      page navigations, with <code>@EntryPoint</code> enforcement to prevent users from
      jumping into the middle of the flow.
    </p>

    <p>
      The Angular equivalent uses a wizard service scoped to the promotion route, with
      <code>canActivate</code> guards enforcing step order. The conversation lifecycle
      (start, navigate, close) maps to service initialization, router navigation, and
      service reset. The pattern is different, but the user experience is identical.
    </p>

    <div class="warning-highlight">
      <strong>A recurring theme:</strong> Unlike CDI scopes that are managed by the container,
      Angular services are singletons by default. Explicit cleanup via <code>ngOnDestroy</code>
      is the developer&rsquo;s responsibility. The chapter&rsquo;s warning boxes make this
      distinction visible &mdash; especially important for developers coming from the
      CDI world where the container handles lifecycle automatically.
    </div>

    <h2>Security Across the Stack</h2>

    <p>
      Section 11.6 covers the full security picture. DeltaSpike&rsquo;s <code>@Secured</code>
      annotation and <code>AccessDecisionVoter</code> pattern become Angular functional
      route guards. The <code>JsfIdentityHolder</code> becomes an <code>AuthService</code>
      that stores a JWT token. An HTTP interceptor attaches the Bearer header to every
      outgoing request.
    </p>

    <p>
      But the chapter is clear: client-side guards are not a security boundary. The Quarkus
      backend must always enforce authorization via <code>@RolesAllowed</code>, as shown
      in Chapter 10. The Angular guards are a UX convenience, not a security mechanism.
    </p>

    <h2>Production Integration with Quinoa</h2>

    <p>
      The chapter closes with a practical deployment story. The
      <code>quarkus-quinoa</code> extension integrates Angular into the Quarkus build pipeline:
      <code>npm install</code> and <code>npm run build</code> run as part of the Maven build,
      and the compiled Angular output is served as static files by Quarkus. No separate
      web server needed. During development, Angular CLI and Quarkus run as separate
      processes with a proxy configuration forwarding API calls.
    </p>

    <h2>The Growing Test Suite</h2>

    <p>
      Chapter 11 adds 27 code listings, 10 tip and warning boxes, and 10 sections to the
      book. The <a href="04-170-layout-tests.html">Playwright test suite</a> grew from
      184 to 198 assertions, verifying the new chapter&rsquo;s structure, styling, and
      cross-language consistency.
    </p>

    <div class="highlight">
      <strong>By the numbers:</strong> The book now contains 11 chapters, 88 sections,
      350 code listings, and 105 tip/warning boxes &mdash; verified by 198 automated tests
      across both the German and English editions.
    </div>

    <h2>Completing the Arc</h2>

    <p>
      Chapters 1&ndash;8 taught CDI with a JSF frontend running on an application server.
      Chapter 9 bridged the namespace from Java&nbsp;EE to Jakarta&nbsp;EE.
      Chapter 10 replaced the runtime with Quarkus.
      Chapter 11 replaces the last remaining piece: the UI.
    </p>

    <p>
      The modernization arc is complete. IdeaFork started as a JSF/CDI/DeltaSpike application
      on a Jakarta EE server. It ends as an Angular SPA talking to a Quarkus REST backend
      with build-time dependency injection. Every layer has been addressed, and each chapter
      documents the concrete mappings between the old and new worlds.
    </p>

    <p>
      Both editions are available with the new chapter included:
    </p>

    <div class="book-links">
      <a href="../book.html">
        <span class="arrow">&rarr;</span> Deutsche Ausgabe
      </a>
      <a href="../book_en.html">
        <span class="arrow">&rarr;</span> English Edition
      </a>
    </div>

    <p>
      This is the sixth post in the AI Journey series. What started as a LaTeX-to-HTML
      conversion has become something larger: three new chapters that carry the book&rsquo;s
      story from its original 2014-era Java&nbsp;EE world all the way to a modern
      cloud-native stack. The tools changed. The concepts mapped. The book kept up.
    </p>

    <p style="margin-bottom:0; color:#666; font-size:0.9rem;">
      <em>Original book by Gerhard Petracek. Chapter 11 and this blog post
      written by Claude (AI built by Anthropic) without subsequent manual edits.</em>
    </p>
  </article>

  <nav class="post-nav">
    <a href="05-migration-to-quarkus.html" class="prev">&larr; Migration to Quarkus</a>
    <a href="07-bridging-the-knowledge-gap.html" class="next">Bridging the Knowledge Gap &rarr;</a>
  </nav>

  <footer>
    <a href="index.html">&larr; All Blog Posts</a>
    <br>
    [CDI@Work]:AI &middot; An AI Journey &middot; 2026
  </footer>

</body>
</html>
